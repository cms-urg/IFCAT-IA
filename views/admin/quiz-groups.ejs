<%- include ./header -%>

<h1>Groups</h1>

<!--h4 class="todo">@TODO: ability to delete groups</h4-->

<!--button type="button" class="btn btn-default btn-sm" id="btn-add-group"><span 
    class="glyphicon glyphicon-plus"></span> Add group</button-->
<!--button type="button" class="btn btn-default btn-sm" id="btn-generate-groups">Generate groups</button-->
<!--button type="button" class="btn btn-default btn-sm btn-primary" id="btn-save-groups">Save</button-->

<form id="form-tutorial-quiz-group" class="form-horizontal">
    <div class="form-group">
        <label class="col-sm-2 control-label">Published?</label>
        <div class="col-sm-10">
            <label class="radio-inline">
                <input type="radio" name="published" value="0"<%= tutorialQuiz.published ? '' : ' checked' %>>No
            </label>
            <label class="radio-inline">
                <input type="radio" name="published" value="1"<%= tutorialQuiz.published ? ' checked' : '' %>>Yes
            </label>
        </div>
    </div>
    <div class="form-group">
        <label class="col-sm-2 control-label">Unlocked?</label>
        <div class="col-sm-10">
            <label class="radio-inline">
                <input type="radio" name="unlocked" value="0"<%= tutorialQuiz.unlocked ? '' : ' checked' %>>No
            </label>
            <label class="radio-inline">
                <input type="radio" name="unlocked" value="1"<%= tutorialQuiz.unlocked ? ' checked' : '' %>>Yes
            </label>
        </div>
    </div>
    <div class="form-group">
        <label class="col-sm-2 control-label">Active?</label>
        <div class="col-sm-10">
            <label class="radio-inline">
                <input type="radio" name="active" value="0"<%= tutorialQuiz.active ? '' : ' checked' %>>No
            </label>
            <label class="radio-inline">
                <input type="radio" name="active" value="1"<%= tutorialQuiz.active ? ' checked' : '' %>>Yes
            </label>
        </div>
    </div>
</form>

<br><br>
<div class="clearfix"></div>

<div class="row">
    <div class="col-xs-3 col-md-2" id="col-unassigned-students">
        <h4>Unassigned students</h4>
        <div class="panel sortable">
        <% for (var i = 0, len = tutorialQuiz.unassignedStudents.length; i < len; i++) { %>
            <button type="button" class="btn btn-default btn-block" data-member-id="<%= tutorialQuiz.unassignedStudents[i].id %>">
                <%= tutorialQuiz.unassignedStudents[i].name.full %>
            </button>
        <% } %>
        </div>
    </div>
    <div class="col-xs-7 col-md-9" id="col-groups">
        <h4>Groups</h4>
        <div class="panel-group" id="panel-groups">
        <% for (var i = 0, len = tutorialQuiz.groups.length; i < len; i++) { %>
            <div class="panel panel-default" data-group-id="<%= tutorialQuiz.groups[i].id %>">
                <div class="dropdown" style="z-index: <%= i + 1000 %>">
                    <button class="btn btn-default btn-sm dropdown-toggle" type="button" data-toggle="dropdown">
                        Actions<span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu">
                        <li><a href="/admin/courses/<%= course.id %>/tutorial-quizzes/<%= tutorialQuiz.id %>/groups/<%= tutorialQuiz.groups[i].id %>/responses">View Responses</a></li>
                        <li class="divider"></li>
                        <li><a href="#"><span class="glyphicon glyphicon-remove"></span> Delete Group</a></li>
                    </ul>
                </div>
                <div class="panel-heading" data-toggle="collapse" data-target="#group-<%= tutorialQuiz.groups[i].id %>">
                    <h4 class="panel-title">Group #<%= i + 1 %></h4>
                </div>
                <div id="group-<%= tutorialQuiz.groups[i].id %>" class="panel-collapse collapse">
                    <div class="panel-body sortable">
                    <% for (var j = 0, len2 = tutorialQuiz.groups[i].members.length; j < len2; j++) { %>
                        <button type="button" class="btn btn-default" 
                            data-member-id="<%= tutorialQuiz.groups[i].members[j].id %>">
                            <%= tutorialQuiz.groups[i].members[j].name.full %>
                        </button>
                    <% } %>
                    </div>
                </div>
            </div>
        <% } %>
        </div>
    </div>
</div>

<script type="text/template" id="panel-group-template">
    <div class="panel panel-default" data-group-id="new">
        <div class="panel-heading" data-parent="#panel-groups" data-target="#group-${ id }">
            <h4 class="panel-title">New group</h4>
            <a href="#" class="btn btn-defaut"><span class="glyphicon glyphicon-remove"></span> Delete Group</a>
        </div>
        <div id="group-${ id }" class="panel-collapse collapse in">
            <div class="panel-body sortable"></div>
        </div>
    </div>
</script>

<!--input type="hidden" id="generate-groups-url" 
    value="/admin/courses/<%= course.id %>/tutorial-quizzes/<%= tutorialQuiz.id %>/groups/generate">
<input type="hidden" id="save-groups-url" 
    value="/admin/courses/<%= course.id %>/tutorial-quizzes/<%= tutorialQuiz.id %>/groups/save"-->

<input type="hidden" id="publish-tutorial-quiz-url" 
    value="/admin/courses/<%= course.id %>/tutorial-quizzes/<%= tutorialQuiz.id %>/publish">
<input type="hidden" id="unlock-tutorial-quiz-url" 
    value="/admin/courses/<%= course.id %>/tutorial-quizzes/<%= tutorialQuiz.id %>/unlock">
<input type="hidden" id="activate-tutorial-quiz-url" 
    value="/admin/courses/<%= course.id %>/tutorial-quizzes/<%= tutorialQuiz.id %>/activate">


<%- include ./footer -%>