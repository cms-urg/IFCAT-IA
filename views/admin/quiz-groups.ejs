<%- include ./header -%>

<h1>Groups</h1>

<h4 class="todo">@TODO: ability to delete groups</h4>

<button type="button" class="btn btn-default btn-sm" id="btn-add-group">Add group</button>
<button type="button" class="btn btn-default btn-sm" id="btn-generate-groups">Generate groups</button>
<button type="button" class="btn btn-default btn-sm btn-primary" id="btn-save-groups">Save</button>

<br><br>

<div class="row">
    <div class="col-xs-4 col-md-3 sortable">
    <% tutorialQuiz.unassignedStudents.forEach(function (student) { %>
        <button type="button" class="btn btn-default btn-block" data-member-id="<%= student.id %>">
            <%= student.name.full %>
        </button>
    <% }) %>
    </div>
    <div class="col-xs-6 col-md-6">
        <div class="panel-group" id="panel-groups">
        <% tutorialQuiz.groups.forEach(function (group) { %>
            <div class="panel panel-default" data-group-id="<%= group.id %>">
                <div class="panel-heading">
                    <h4 class="panel-title">
                        <a data-toggle="collapse" data-parent="#panel-groups" href="#group-<%= group.id %>"><%= group.name %></a>
                    </h4>
                </div>
                <div id="group-<%= group.id %>" class="panel-collapse collapse in">
                    <div class="panel-body sortable">
                    <% group.members.forEach(function (member) { %>
                        <button type="button" class="btn btn-default btn-block" data-member-id="<%= member.id %>">
                            <%= member.name.full %>
                        </button>
                    <% }) %>
                    </div>
                </div>
            </div>
        <% }) %>
        </div>
    </div>
</div>

<script type="text/template" id="panel-group-template">
    <div class="panel panel-default" data-group-id="new">
        <div class="panel-heading">
            <h4 class="panel-title">
                <a data-toggle="collapse" data-parent="#panel-groups" href="#group-${ id }">New group</a>
            </h4>
        </div>
        <div id="group-${ id }" class="panel-collapse collapse in">
            <div class="panel-body sortable"></div>
        </div>
    </div>
</script>

<input type="hidden" id="generate-groups-url" 
    value="/admin/courses/<%= course.id %>/tutorial-quizzes/<%= tutorialQuiz.id %>/groups/generate">
<input type="hidden" id="save-groups-url" 
    value="/admin/courses/<%= course.id %>/tutorial-quizzes/<%= tutorialQuiz.id %>/groups/save">

<%- include ./footer -%>